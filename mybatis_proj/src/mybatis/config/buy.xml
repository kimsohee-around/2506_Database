<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.mapper.BuyMapper">
  <!-- tbl_buy 테이블의 기본키는 buy_seq  -->
  <select id="selectByCustomer" parameterType="string" resultType="BuyVo">
    SELECT *
    from TBL_BUY
    where CUSTOMER_ID=#{customerId}
  </select>
  <select id="selectByPcode" parameterType="string" resultType="BuyVo">
    SELECT *
    from TBL_BUY
    where pcode=#{pcode}
  </select>
  <select id="selectByYear" parameterType="string" resultType="BuyVo">
    SELECT *
    from TBL_BUY
    where to_char(BUY_DATE,'yyyy')=#{year}
  </select>
  <select id="selectSumByPcode" parameterType="string" resultType="int">
    <!-- 1개 행, 1개 컬럼 조회는 단일값 -->
    SELECT sum(quantity)  
    from TBL_BUY
    where pcode=#{pcode}
  </select>
</mapper>
<!-- 

- - 사용자 구매 내역 조회 : selectByCustomer
SELECT *
from TBL_BUY
where CUSTOMER_ID='mina012';

- - 상품 구매 내역 조회  : selectByPcode
SELECT *
from TBL_BUY
where pcode='JINRMn5';

- - 년도 구매 내역 조회 : selectByYear
SELECT *
from TBL_BUY
where to_char(BUY_DATE,'yyyy')='2024'

- - 상품의 구매 수량 합계 조회 : selectSumByPcode  참고 : resultType="int"
SELECT sum(quantity)      
from TBL_BUY
where pcode='JINRMn5';
-->
